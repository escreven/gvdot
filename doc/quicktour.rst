.. currentmodule:: gvdot

.. |br| raw:: html

   <br />


Quick Tour
==========

.. code-block:: python

    from gvdot import Dot, Markup, Port, Nonce



Class :class:`Dot` is a DOT language builder.  Method :meth:`~Block.graph()`
establishes or amends graph attributes.  :meth:`~Dot.node()` and
:meth:`~Block.edge()` define and amend nodes and edges.  Method
:meth:`~Block.subgraph()` defines or amends subgraphs, returning an instance
of :class:`Block`, the base class of :class:`Dot`.  Most builder methods are
actually :class:`Block` methods.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/basic-construction.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/basic-construction.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/basic-construction.*
        :align: center



:meth:`str(dot) <Dot.__str__>` returns a Dot object's DOT language
representation.  :class:`Dot` invokes Graphviz programs with that
representation as input, rendering to files (:meth:`~Dot.save`), image bytes
(:meth:`~Dot.to_rendered`), or SVG strings (:meth:`~Dot.to_svg`).  In
notebooks, :meth:`~Dot.show` and :meth:`~Dot.show_source` display rendered SVG
and DOT language.

.. list-table::
    :align: left
    :class: .gvdot-example-table .my-col-1-header

    * - Use anywhere
      - .. code-block:: python

            dot.save("images/basic.png")          # Write to file
            data = dot.to_rendered(format="jpg")  # Get image bytes
            svg = dot.to_svg()                    # Get SVG
            print(dot)                            # Print DOT language

    * - Use in notebooks
      - .. code-block:: python

            dot.show()         # Displays rendered SVG
            dot.show_source()  # Displays DOT language



Methods :meth:`~Block.graph_default`, :meth:`~Block.node_default`, and
:meth:`~Block.edge_default` establish or amend default attributes for graphs,
nodes, and edges.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/default-attributes.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/default-attributes.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/default-attributes.*
        :align: center



A role is a named collection of attribute values.  Methods
:meth:`~Dot.graph_role`, :meth:`~Dot.node_role`, and :meth:`~Dot.edge_role`
define or amend roles.  Assigning a role name to an element's ``role``
attribute causes that element to inherit the role's attribute values.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/roles.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/roles.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/roles.*
        :align: center



A theme is a normal :class:`Dot` object from which other Dot objects inherit
graph attributes, default attributes, and roles.  Method :meth:`~Dot.use_theme`
establishes the inheritance relationship.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/themes.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/themes.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/themes.*
        :align: center



Most methods return ``self``, enabling chained method calls.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/method-chaining.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/method-chaining.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/method-chaining.*
        :align: center


A :class:`Nonce` is a placeholder for a unique identifier generated by
:class:`Dot`. Those generated identifiers will not conflict with any others,
either generated or explicitly provided.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/nonces.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/nonces.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/nonces.*
        :align: center


Applications use :class:`Markup` to delineate Graphviz HTML strings.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/markup.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/markup.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/markup.*
        :align: center


An edge endpoint can be a :class:`Port`.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/ports.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/ports.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/ports.*
        :align: center


:class:`Dot` constructor argument ``multigraph=True`` enables multiple edges
between endpoints.  Discriminants allow those edges to be amended.

.. list-table::
   :align: left
   :class: .gvdot-example-table .my-col-1-header

   * - Code
     - .. include:: _code/quicktour/multigraphs.py.rst

   * - DOT language |br| representation
     - .. include:: _code/quicktour/multigraphs.dot.rst

   * - Rendered
     - .. image:: _static/quicktour/multigraphs.*
        :align: center


.. rubric:: Keep in Mind

While several :class:`Dot` methods correspond to DOT language statements, gvdot
is not a DOT language format printer, streaming out DOT language statements
with every call.

Instead, applications build Graphviz diagrams structurally starting with a
:class:`Dot` object.  When finished, they save or render a DOT language
representation of that object.  Method call order is for the most part
irrelevant, and amendments to already defined elements do not create additional
DOT language statements; they change the one statement ultimately emitted.

Similarly, :class:`Role`, :class:`Theme`, and :class:`Nonce` objects are not
resolved until a DOT language representation is required, and those resolutions
are ephemeral --- further changes to the Dot object, roles, or themes can lead
to different resolutions if a DOT language representation is required again.

------

This tour is available as a `notebook on GitHub
<https://github.com/escreven/gvdot/blob/main/examples/quicktour.ipynb>`_.
